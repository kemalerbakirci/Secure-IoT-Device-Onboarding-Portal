# ğŸ—ï¸ Secure IoT Device Onboarding Portal - Architecture

## ğŸ¯ System Overview

The Secure IoT Device Onboarding Portal provides automated certificate-based device registration, credential provisioning, and secure MQTT broker access management for IoT deployments.

## ğŸ§± Architecture Diagram

```text
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                            ğŸ¢ ENTERPRISE ZONE                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    HTTP/JSON     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚   ğŸ§‘â€ğŸ’» Operator    â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º â”‚          ğŸŒ REST API                â”‚  â”‚
â”‚  â”‚   CLI Client    â”‚                  â”‚      (Flask Application)            â”‚  â”‚
â”‚  â”‚                 â”‚                  â”‚         Port: 5000                   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                   â”‚                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                              â”‚                              â”‚
â”‚  â”‚  ğŸ“± Web Portal   â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                              â”‚
â”‚  â”‚  (Future)       â”‚                                                             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                             â”‚
â”‚                                                                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                            ğŸ“Š APPLICATION LAYER                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                 â”‚
â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”‚
â”‚                    â”‚          ğŸ”§ Core Services            â”‚                     â”‚
â”‚                    â”‚                                      â”‚                     â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚    â”‚ ğŸ—„ï¸ Database    â”‚         â”‚  â”‚ ğŸ” CA Core  â”‚  â”‚ ğŸ“¦ Credential â”‚      â”‚      â”‚
â”‚    â”‚   Module      â”‚         â”‚  â”‚   Module    â”‚  â”‚   Delivery    â”‚      â”‚      â”‚
â”‚    â”‚  (db.py)      â”‚         â”‚  â”‚  (ca.py)    â”‚  â”‚ (credential_  â”‚      â”‚      â”‚
â”‚    â”‚               â”‚         â”‚  â”‚             â”‚  â”‚  delivery.py) â”‚      â”‚      â”‚
â”‚    â”‚ â€¢ Device CRUD â”‚         â”‚  â”‚ â€¢ X.509 Gen â”‚  â”‚ â€¢ ZIP Package â”‚      â”‚      â”‚
â”‚    â”‚ â€¢ Cert Meta   â”‚         â”‚  â”‚ â€¢ Key Pairs â”‚  â”‚ â€¢ Secure Linksâ”‚      â”‚      â”‚
â”‚    â”‚ â€¢ SQLite      â”‚         â”‚  â”‚ â€¢ CRL Mgmt  â”‚  â”‚ â€¢ Download    â”‚      â”‚      â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚  â”‚ â€¢ CA Root   â”‚  â”‚   Management  â”‚      â”‚      â”‚
â”‚            â”‚                 â”‚  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚      â”‚
â”‚            â”‚                 â”‚        â”‚                  â”‚              â”‚      â”‚
â”‚            â”‚                 â”‚        â”‚                  â”‚              â”‚      â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”   â”‚
â”‚    â”‚                ğŸ¯ REST API ORCHESTRATOR                            â”‚  â”‚   â”‚
â”‚    â”‚                        (app.py)                                    â”‚  â”‚   â”‚
â”‚    â”‚                                                                    â”‚  â”‚   â”‚
â”‚    â”‚  ğŸ“ Endpoints:                                                     â”‚  â”‚   â”‚
â”‚    â”‚  â€¢ POST /register  â†’ Device Registration + Cert Issue             â”‚  â”‚   â”‚
â”‚    â”‚  â€¢ GET  /device/<id> â†’ Device Status & Certificate Info           â”‚  â”‚   â”‚
â”‚    â”‚  â€¢ POST /revoke/<id> â†’ Certificate Revocation + ACL Removal       â”‚  â”‚   â”‚
â”‚    â”‚  â€¢ GET  /health     â†’ System Health Check                         â”‚  â”‚   â”‚
â”‚    â”‚                                                                    â”‚  â”‚   â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”˜   â”‚
â”‚                             â”‚                                           â”‚      â”‚
â”‚                             â”‚                                           â”‚      â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”   â”‚
â”‚    â”‚     ğŸ›¡ï¸ Broker Provisioning             â”‚  â”‚   ğŸ”’ Certificate        â”‚  â”‚   â”‚
â”‚    â”‚        Module                          â”‚  â”‚     Storage             â”‚  â”‚   â”‚
â”‚    â”‚  (broker_provisioning.py)             â”‚  â”‚                         â”‚  â”‚   â”‚
â”‚    â”‚                                       â”‚  â”‚  ğŸ“‚ certs/              â”‚  â”‚   â”‚
â”‚    â”‚  â€¢ ACL Management                     â”‚  â”‚  â”œâ”€â”€ ca.crt             â”‚  â”‚   â”‚
â”‚    â”‚  â€¢ Topic Permissions                 â”‚  â”‚  â”œâ”€â”€ ca.key             â”‚  â”‚   â”‚
â”‚    â”‚  â€¢ Mosquitto Integration             â”‚  â”‚  â”œâ”€â”€ crl.pem            â”‚  â”‚   â”‚
â”‚    â”‚  â€¢ Dynamic Updates                   â”‚  â”‚  â””â”€â”€ devices/           â”‚  â”‚   â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚      â””â”€â”€ <device-id>/  â”‚  â”‚   â”‚
â”‚                    â”‚                          â”‚          â”œâ”€â”€ device.keyâ”‚  â”‚   â”‚
â”‚                    â”‚                          â”‚          â”œâ”€â”€ device.crtâ”‚  â”‚   â”‚
â”‚                    â”‚                          â”‚          â””â”€â”€ creds.zip â”‚  â”‚   â”‚
â”‚                    â”‚                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”˜   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                    â”‚                  ğŸ’¾ PERSISTENCE LAYER                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                    â”‚                                                           â”‚
â”‚                    â–¼                                                           â”‚
â”‚          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚          â”‚   ğŸ“„ ACL Config      â”‚      â”‚   ğŸ—ƒï¸ Device DB       â”‚                  â”‚
â”‚          â”‚  mosquitto.acl      â”‚      â”‚   devices.db        â”‚                  â”‚
â”‚          â”‚                     â”‚      â”‚  (SQLite)           â”‚                  â”‚
â”‚          â”‚ user device123:     â”‚      â”‚                     â”‚                  â”‚
â”‚          â”‚ topic read dev123/# â”‚      â”‚ Tables:             â”‚                  â”‚
â”‚          â”‚ topic write dev123/#â”‚      â”‚ â€¢ devices           â”‚                  â”‚
â”‚          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚ â€¢ certificates      â”‚                  â”‚
â”‚                                       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â”‚                                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           ğŸŒ DEPLOYMENT ZONE                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                 â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚                      ğŸ­ Device Manufacturing                            â”‚   â”‚
â”‚   â”‚                                                                         â”‚   â”‚
â”‚   â”‚  1ï¸âƒ£ Register Device    2ï¸âƒ£ Download Creds    3ï¸âƒ£ Flash Firmware         â”‚   â”‚
â”‚   â”‚     via CLI/API    â”€â”€â–º    via Secure Link â”€â”€â–º   with Certificates       â”‚   â”‚
â”‚   â”‚                                                                         â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                           â”‚                                     â”‚
â”‚                                           â”‚ Secure Provisioning                 â”‚
â”‚                                           â–¼                                     â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚                     ğŸŒ PRODUCTION ENVIRONMENT                           â”‚   â”‚
â”‚   â”‚                                                                         â”‚   â”‚
â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             mTLS Connection           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚
â”‚   â”‚  â”‚  ğŸ“± IoT Device   â”‚ â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º â”‚ ğŸ¦Ÿ MQTT  â”‚ â”‚   â”‚
â”‚   â”‚  â”‚                 â”‚                                      â”‚  Broker  â”‚ â”‚   â”‚
â”‚   â”‚  â”‚ â€¢ Client Cert   â”‚    Authenticated Topics:             â”‚          â”‚ â”‚   â”‚
â”‚   â”‚  â”‚ â€¢ Private Key   â”‚    devices/{device-id}/#             â”‚ â€¢ mTLS   â”‚ â”‚   â”‚
â”‚   â”‚  â”‚ â€¢ CA Root Cert  â”‚                                      â”‚ â€¢ ACL    â”‚ â”‚   â”‚
â”‚   â”‚  â”‚ â€¢ Device ID     â”‚                                      â”‚ â€¢ CRL    â”‚ â”‚   â”‚
â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚
â”‚   â”‚                                                                         â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”„ Data Flow & Security

### 1. Device Registration Flow
```text
Operator â†’ CLI/Web â†’ REST API â†’ CA Module â†’ Certificate Generation
                  â†“             â†“
               Database â†â”€â”€ Broker Provisioning â†â”€â”€ ACL Update
                  â†“
            Credential Delivery â†’ Secure ZIP + Download Link
```

### 2. Certificate Lifecycle
```text
Generate Keypair â†’ Sign Certificate â†’ Store Metadata â†’ Package Credentials
                                   â†“
                             Update ACL Rules
                                   â†“
                          Device Manufacturing
                                   â†“
                            Production Deployment
                                   â†“
                      Revocation (if needed) â†’ CRL Update
```

### 3. Security Boundaries

| Component | Security Features | Trust Level |
|-----------|------------------|-------------|
| **CA Module** | RSA 2048-bit keys, X.509v3 certificates, CRL management | ğŸ”´ Critical |
| **REST API** | Input validation, UUID-based device IDs | ğŸŸ¡ Trusted |
| **Database** | SQLite with foreign key constraints | ğŸŸ¢ Internal |
| **Credential Delivery** | Password-protected ZIP, temporary links | ğŸŸ¡ Trusted |
| **Broker Integration** | ACL-based topic restrictions, mTLS | ğŸ”´ Critical |

## ğŸš€ Deployment Options

### Development
```bash
# Local SQLite + File-based storage
python -m src.secure_iot_onboarding.app
```

### Production
```bash
# PostgreSQL + Redis + Load Balancer
docker-compose up -d
```

## ğŸ“ˆ Scalability Considerations

- **Horizontal**: Multiple API instances behind load balancer
- **Database**: PostgreSQL cluster for production
- **Certificate Storage**: Distributed file system (S3, GCS)
- **Broker**: MQTT broker clustering with shared ACL store
- **Monitoring**: Certificate expiration alerts, audit logs

## ğŸ”§ Configuration

Key configuration points:
- `DATABASE_URL`: Database connection string
- `CERT_VALIDITY_DAYS`: Certificate lifetime (default: 365)
- `CA_ROOT_PATH`: CA certificate and key location
- `BROKER_ACL_FILE`: Mosquitto ACL file path
- `DOWNLOAD_EXPIRY_MINUTES`: Credential link lifetime (default: 30)
